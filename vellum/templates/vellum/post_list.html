{% extends "vellum/base_vellum.html" %}
{% load i18n %}

{% block body_class %}{{ block.super }} archive{% endblock %}

{% block content %}
    <h1 class="page-title">{% block page_title %}{% trans "Post archive" %}{% endblock %}</h1>

    {% for post in object_list %}
        <div class="entry">
            <h2 class="title"><a href="{{ post.get_absolute_url }}" title="{% trans "Permalink to" %} {{ post.title }}">{{ post.title }}</a></h2>
            <div class="meta">
                <div class="date">{{ post.publish|date }}</div>

                {% if post.tags.all %}
                <div class="tags">
                    <span class="label">{% trans "Tags" %}:</span>
                    <ul>
                        {% for tag in post.tags.all %}
                        <li><a href="{% url vellum_tag_detail slug=tag.slug  %}">{{ tag }}</a></li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                {% if perms.vellum.change_post %}
                <a title="{% trans "Edit" %} {{ post.title }}" class="edit" href="{% url admin:vellum_post_change post.id %}">Edit</a>
                {% endif %}
            </div>
            <div class="body">
            {% if BLOG_EXCERPTS and post.excerpt %}
                {{ post.excerpt|safe }}
            {% else %}
                {{ post.body_rendered|safe }}
            {% endif %}
            </div>
        </div>
    {% endfor %}

    {% if is_paginated %}
    <div class="pagination">
        {% if page_obj.has_next %}
        <a class="older" href="?page={{ page_obj.next_page_number }}" title="{% trans "View older posts" %}">&laquo; {% trans "Older" %}</a>
        {% endif %}
        {% if page_obj.has_previous %}<span class="separator">|</span>{% endif %}
        {% if page_obj.has_previous %}
        <a class="newer" href="?page={{ page_obj.previous_page_number }}" title="{% trans "View newer posts" %}">{% trans "Newer" %} &raquo;</a>
        {% endif %}
    </div>
    {% endif %}

{% endblock %}
